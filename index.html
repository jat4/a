<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">

<!-- ZOOM LOCK -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<title>Locker</title>

<style>
    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

    body {
        background:#0d1117;
        color:#fff;
        font-family:Arial, sans-serif;
        margin:0;
        padding:0;
        min-height:100vh;
        display:flex;
        justify-content:center;
        align-items:center;
    }

    .container {
        width:100%;
        max-width:450px;
        padding:20px;
    }

    .box {
        background:#161b22;
        padding:22px;
        border-radius:14px;
        box-shadow:0 0 10px #00000060;
    }

    h2 {
        text-align:center;
        margin:0 0 15px;
        font-size:22px;
    }

    input, textarea, button {
        width:100%;
        padding:14px;
        margin-top:12px;
        border:none;
        border-radius:10px;
        background:#0d1117;
        color:#fff;
        font-size:16px;
    }

    textarea { resize:none; height:110px; }

    button {
        background:#238636;
        font-weight:bold;
        cursor:pointer;
    }

    button:hover { background:#2ea043; }

    #copyBtn { background:#444; }
    #copyBtn:hover { background:#555; }

    #msg { text-align:center; margin-top:10px; }
</style>
</head>

<body>

<div class="container">

    <!-- PASSWORD -->
    <div id="loginBox" class="box">
        <h2>üîí Enter Password</h2>
        <input type="password" id="pass" placeholder="Password">
        <button onclick="checkPass()">Unlock</button>
        <p id="msg" style="color:red;"></p>
    </div>

    <!-- MAIN APP -->
    <div id="mainApp" style="display:none;">
        <div class="box">
            <h2>üîê Multi-Layer Encryption</h2>

            <textarea id="text" placeholder="Enter text"></textarea>
            <input id="key" type="number" value="5">

            <button onclick="encrypt()">Encrypt</button>
            <button onclick="decrypt()">Decrypt</button>

            <textarea id="result" readonly></textarea>
            <button id="copyBtn" onclick="copyResult()">üìã Copy Result</button>
        </div>
    </div>

</div>

<script>
// PASSWORD
const MASTER_PASS = "nistoli";

function checkPass() {
    let p = document.getElementById("pass").value;
    if (p === MASTER_PASS) {
        document.getElementById("loginBox").style.display = "none";
        document.getElementById("mainApp").style.display = "block";
    } else {
        document.getElementById("msg").innerText = "‚ùå Wrong Password!";
    }
}

/* LAYER 1 ‚Äì SHIFT (case-safe) */
function shiftChar(c, key) {
    let code = c.charCodeAt(0);

    if (code >= 65 && code <= 90)
        return String.fromCharCode(((code - 65 + key + 26) % 26) + 65);

    if (code >= 97 && code <= 122)
        return String.fromCharCode(((code - 97 + key + 26) % 26) + 97);

    return c;
}
function shiftText(text, key) {
    return [...text].map(c => shiftChar(c, key)).join("");
}

/* LAYER 2 ‚Äì SUBSTITUTION (case-safe) */
const up = {
    A:'@', B:'#', C:'$', D:'%', E:'&', F:'*', G:'!', H:'?', I:'/',
    J:'=', K:'+', L:'~', M:'^', N:':', O:';', P:'<', Q:'>', R:'[',
    S:']', T:'{', U:'}', V:'|', W:'(', X:')', Y:'_', Z:'-'
};

const low = {};
for (let k in up) low[k.toLowerCase()] = up[k].toLowerCase();

const revUp = {}, revLow = {};
for (let k in up) {
    revUp[up[k]] = k;
    revLow[low[k.toLowerCase()]] = k.toLowerCase();
}

function substitute(text) {
    return [...text].map(ch => {
        if (up[ch]) return up[ch];
        if (low[ch]) return low[ch];
        return ch;
    }).join("");
}

function reverseSub(text) {
    return [...text].map(ch => {
        if (revUp[ch]) return revUp[ch];
        if (revLow[ch]) return revLow[ch];
        return ch;
    }).join("");
}

/* LAYER 3 ‚Äì REVERSE TEXT */
function reverseText(t) { return [...t].reverse().join(""); }

/* LAYER 4 ‚Äì HEX (case safe) */
function toHex(t) {
    return t.split("").map(c => 
        c.charCodeAt(0).toString(16).padStart(2,"0")
    ).join("-");
}
function fromHex(h) {
    return h.split("-").map(x => 
        String.fromCharCode(parseInt(x, 16))
    ).join("");
}

/* LAYER 5 ‚Äì SHUFFLE BLOCKS */
function shuffleBlocks(t) {
    let blocks = t.match(/.{1,3}/g);
    return blocks.reverse().join("|");
}
function unshuffleBlocks(t) {
    return t.split("|").reverse().join("");
}

/* LAYER 6 ‚Äì BASE64 */
const toBase64 = t => btoa(t);
const fromBase64 = t => atob(t);

/* ENCRYPT */
function encrypt() {
    let t = document.getElementById("text").value;
    let key = parseInt(document.getElementById("key").value);

    t = shiftText(t, key);
    t = substitute(t);
    t = reverseText(t);
    t = toHex(t);
    t = shuffleBlocks(t);
    t = toBase64(t);

    document.getElementById("result").value = t;
}

/* DECRYPT */
function decrypt() {
    let t = document.getElementById("text").value;
    let key = parseInt(document.getElementById("key").value);

    t = fromBase64(t);
    t = unshuffleBlocks(t);
    t = fromHex(t);
    t = reverseText(t);
    t = reverseSub(t);
    t = shiftText(t, -key);

    document.getElementById("result").value = t;
}

/* COPY BUTTON (no popup) */
function copyResult() {
    let r = document.getElementById("result");

    if (navigator.clipboard && window.isSecureContext) {
        navigator.clipboard.writeText(r.value);
    } else {
        const temp = document.createElement("textarea");
        temp.value = r.value;
        document.body.appendChild(temp);
        temp.select();
        document.execCommand("copy");
        temp.remove();
    }

    let btn = document.getElementById("copyBtn");
    btn.innerText = "‚úî Copied!";
    btn.style.background = "#2ea043";

    setTimeout(() => {
        btn.innerText = "üìã Copy Result";
        btn.style.background = "#444";
    }, 1500);
}
</script>

</body>
</html>
